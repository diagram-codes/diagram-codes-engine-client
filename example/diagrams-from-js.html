<!DOCTYPE html>
<html>
<head>
    <title>Diagram Codes embed example</title>
    <style>
        #container1{
            height:200px;
        }
    </style>
</head>
<body>
    <p>
        Embedding the diagram codes engine in a web application
    </p>
    <button id="btn">Render diagram</button>
    <div id="container1"></div>
    <div id="container2"></div>
    <script type="text/javascript" src="./diagram-codes-engine-client.umd.js"></script>
    <script>
        /* Set the path to the location of the engine web package.
           The unique engine url is provided when you register for an integration subscription.

           If required, the diagram rendering engine can also be self hosted
        */

        DiagramEngine.enginePath = 'https://web-engine-demo-dev.diagram.codes/apirender/'

        btn.addEventListener('click', ()=>{

            let graphModel = new DiagramEngine.GraphModel()
            graphModel.addNode("a", "Node A")
            graphModel.addNode("b", "Node B")
            graphModel.addLink("a", "b", "The message")

            //Render Diagram (Graph)

            let diagramParams = {
                container:'#container1',
                model: graphModel,
                theme: {
                    document: {
                        backgroundColor:'lightgrey'
                    }
                }
            }

            DiagramEngine.renderDiagram(diagramParams)

            //Render Diagram 2 (Sequence)
             let diagram2Params = {
                container:'#container2',
                type:'sequence',
                code:`
                   "John Sagan" as john
                    "Mari Rodriguez" as mari
                    "Hugo Zapata" as hugo
                    john->mari: "hello"
                    mari=>john: "hey! this is bold! ðŸ‘‹"
                    john-->mari: "Here's a dashed line!"
                    mari->mari: "A message to myself ðŸ¦‹"
                    john->hugo: "hello hugo"
                    hugo->john: "hey!, how's it going?"

                `,
                theme: {
                    document: {
                        backgroundColor:'lightgrey'
                    }
                }
            }

            DiagramEngine.renderDiagram(diagram2Params)
        })

        //Capture errors
        DiagramEngine.setErrorHandler((errorData)=>{
            console.log(errorData.message);
            console.log(errorData.line);
        })
    </script>
</body>
</html>