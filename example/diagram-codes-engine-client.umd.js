!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).DiagramEngine=n()}(this,function(){var e=function(){function e(){}return e.setEnginePath=function(n){e.enginePath=n},e.setErrorHandler=function(n){e.globalErrorHandler=n},e.renderDiagram=function(n){var r=n.container,t=n.type,i=n.code,o=n.theme;try{if(!e.enginePath)throw new Error("Diagram Engine path not set, use DiagramEngine.setEnginePath('path-to-engine')");var a="string"==typeof r?document.querySelector(r):r;if(!a)throw new Error("Could not find container DOM element");return console.log("initContainer"),Promise.resolve(e.initContainer(a)).then(function(e){console.log("initContainer ends",e),e.contentWindow.postMessage({type:"render-diagram",data:{type:t,code:i,theme:o}},"*")})}catch(e){return Promise.reject(e)}},e.initContainer=function(n){try{return Promise.resolve(new Promise(function(r){var t=n.querySelector("iframe[diagram-renderer]");t?r(t):(n.innerHTML="",(t=document.createElement("iframe")).style.width="100%",t.style.height="100%",t.style.border="none",t.style.minWidth="400px",t.style.minHeight="400px",t.setAttribute("diagram-renderer",""),t.src=e.enginePath,window.addEventListener("message",function(e){e.data&&"diagram-render-engine-ready"===e.data.type&&r(t)}),n.appendChild(t))}))}catch(e){return Promise.reject(e)}},e}();return window.addEventListener("message",function(n){console.log("message",n),n.data&&"diagram-render-error"===n.data.type&&e.globalErrorHandler&&e.globalErrorHandler(n.data)}),e});
//# sourceMappingURL=diagram-codes-engine-client.umd.js.map
